<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Feasibility Study Builder - ProjectManagerTool</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #0891b2;
            --primary-light: #22d3ee;
            --primary-dark: #0e7490;
            --primary-bg: rgba(8, 145, 178, 0.1);
            --success: #10b981;
            --success-bg: rgba(16, 185, 129, 0.1);
            --warning: #f59e0b;
            --warning-bg: rgba(245, 158, 11, 0.1);
            --danger: #ef4444;
            --danger-bg: rgba(239, 68, 68, 0.1);
            --bg: #f8fafc;
            --card-bg: #ffffff;
            --sidebar-bg: #0f172a;
            --sidebar-hover: #1e293b;
            --text: #1e293b;
            --text-muted: #64748b;
            --border: #e2e8f0;
            --shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
            --shadow-lg: 0 10px 40px rgba(0, 0, 0, 0.15);
        }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Inter', sans-serif; background: var(--bg); color: var(--text); display: flex; min-height: 100vh; }
        
        /* Sidebar */
        .sidebar { width: 280px; background: var(--sidebar-bg); color: white; position: fixed; height: 100vh; overflow-y: auto; z-index: 100; }
        .sidebar-header { padding: 1.5rem; border-bottom: 1px solid rgba(255,255,255,0.1); }
        .sidebar-logo { display: flex; align-items: center; gap: 0.75rem; text-decoration: none; color: white; margin-bottom: 0.5rem; }
        .sidebar-logo-icon { width: 40px; height: 40px; background: linear-gradient(135deg, var(--primary) 0%, var(--primary-light) 100%); border-radius: 10px; display: flex; align-items: center; justify-content: center; font-size: 1.25rem; }
        .sidebar-logo-text { font-size: 1.125rem; font-weight: 700; }
        .sidebar-subtitle { font-size: 0.75rem; color: rgba(255,255,255,0.5); }
        .back-link { display: flex; align-items: center; gap: 0.5rem; color: rgba(255,255,255,0.6); text-decoration: none; font-size: 0.875rem; padding: 1rem 1.5rem; border-bottom: 1px solid rgba(255,255,255,0.1); transition: all 0.2s; }
        .back-link:hover { color: white; background: var(--sidebar-hover); }
        
        /* Progress */
        .sidebar-progress { padding: 1.5rem; border-bottom: 1px solid rgba(255,255,255,0.1); }
        .progress-label { font-size: 0.75rem; color: rgba(255,255,255,0.5); margin-bottom: 0.5rem; text-transform: uppercase; letter-spacing: 0.05em; }
        .progress-bar { height: 6px; background: rgba(255,255,255,0.1); border-radius: 3px; overflow: hidden; }
        .progress-fill { height: 100%; background: linear-gradient(90deg, var(--primary) 0%, var(--primary-light) 100%); border-radius: 3px; transition: width 0.5s ease; }
        .progress-text { font-size: 0.875rem; color: rgba(255,255,255,0.8); margin-top: 0.5rem; }
        
        /* Nav */
        .sidebar-nav { padding: 1rem 0; }
        .nav-section { padding: 0.5rem 1.5rem; font-size: 0.7rem; color: rgba(255,255,255,0.4); text-transform: uppercase; letter-spacing: 0.1em; margin-top: 0.5rem; }
        .nav-item { display: flex; align-items: center; gap: 0.75rem; padding: 0.75rem 1.5rem; color: rgba(255,255,255,0.7); text-decoration: none; font-size: 0.875rem; transition: all 0.2s; cursor: pointer; border: none; background: none; width: 100%; text-align: left; }
        .nav-item:hover { background: var(--sidebar-hover); color: white; }
        .nav-item.active { background: linear-gradient(90deg, var(--primary) 0%, transparent 100%); color: white; border-left: 3px solid var(--primary-light); }
        .nav-item.completed { color: var(--success); }
        .nav-number { width: 24px; height: 24px; border-radius: 6px; background: rgba(255,255,255,0.1); display: flex; align-items: center; justify-content: center; font-size: 0.75rem; font-weight: 600; }
        .nav-item.active .nav-number { background: white; color: var(--primary); }
        .nav-item.completed .nav-number { background: var(--success); color: white; }
        
        /* Main Content */
        .main-content { flex: 1; margin-left: 280px; }
        .content-header { background: white; border-bottom: 1px solid var(--border); padding: 1rem 2rem; display: flex; justify-content: space-between; align-items: center; position: sticky; top: 0; z-index: 50; }
        .header-title { font-size: 1.25rem; font-weight: 600; }
        .header-actions { display: flex; gap: 0.75rem; }
        .btn { padding: 0.625rem 1.25rem; border-radius: 8px; font-size: 0.875rem; font-weight: 500; cursor: pointer; transition: all 0.2s; border: none; display: inline-flex; align-items: center; gap: 0.5rem; }
        .btn-secondary { background: var(--bg); border: 1px solid var(--border); color: var(--text); }
        .btn-secondary:hover { background: var(--border); }
        .btn-primary { background: linear-gradient(135deg, var(--primary) 0%, var(--primary-light) 100%); color: white; }
        .btn-primary:hover { transform: translateY(-1px); box-shadow: 0 4px 12px rgba(8, 145, 178, 0.3); }
        .btn-success { background: var(--success); color: white; }
        .btn-examples { background: linear-gradient(135deg, #8b5cf6 0%, #a78bfa 100%); color: white; }
        .btn-examples:hover { transform: translateY(-1px); box-shadow: 0 4px 12px rgba(139, 92, 246, 0.3); }
        
        /* Content Area */
        .content-body { padding: 2rem; max-width: 900px; }
        .section { display: none; }
        .section.active { display: block; }
        .section-header { margin-bottom: 1.5rem; }
        .section-title { font-size: 1.5rem; font-weight: 700; margin-bottom: 0.5rem; }
        .section-desc { color: var(--text-muted); }
        
        .card { background: var(--card-bg); border-radius: 12px; padding: 1.5rem; margin-bottom: 1.5rem; border: 1px solid var(--border); }
        .form-group { margin-bottom: 1.25rem; }
        .form-label { display: block; font-weight: 600; margin-bottom: 0.5rem; font-size: 0.875rem; }
        .form-hint { font-size: 0.8rem; color: var(--text-muted); margin-bottom: 0.5rem; }
        .form-input, .form-select, .form-textarea { width: 100%; padding: 0.75rem 1rem; border: 1px solid var(--border); border-radius: 8px; font-family: inherit; font-size: 0.9rem; transition: all 0.2s; }
        .form-input:focus, .form-select:focus, .form-textarea:focus { outline: none; border-color: var(--primary); box-shadow: 0 0 0 3px var(--primary-bg); }
        .form-textarea { min-height: 120px; resize: vertical; }
        .form-row { display: grid; grid-template-columns: repeat(2, 1fr); gap: 1rem; }
        
        /* Priority Badges */
        .priority-options { display: flex; gap: 0.75rem; flex-wrap: wrap; }
        .priority-option { padding: 0.5rem 1rem; border: 2px solid var(--border); border-radius: 8px; cursor: pointer; transition: all 0.2s; font-size: 0.875rem; }
        .priority-option:hover { border-color: var(--primary); }
        .priority-option.selected { border-color: var(--primary); background: var(--primary-bg); color: var(--primary); }
        .priority-high { border-color: var(--danger); background: var(--danger-bg); color: var(--danger); }
        .priority-moderate { border-color: var(--warning); background: var(--warning-bg); color: var(--warning); }
        .priority-low { border-color: var(--success); background: var(--success-bg); color: var(--success); }
        
        /* Dynamic Lists */
        .list-item { display: flex; gap: 0.75rem; margin-bottom: 0.75rem; align-items: flex-start; }
        .list-item .form-input, .list-item .form-textarea { flex: 1; }
        .remove-btn { width: 36px; height: 36px; border: none; background: var(--danger-bg); color: var(--danger); border-radius: 8px; cursor: pointer; font-size: 1.25rem; transition: all 0.2s; flex-shrink: 0; }
        .remove-btn:hover { background: var(--danger); color: white; }
        .add-btn { display: inline-flex; align-items: center; gap: 0.5rem; padding: 0.5rem 1rem; background: var(--bg); border: 2px dashed var(--border); border-radius: 8px; color: var(--text-muted); cursor: pointer; font-size: 0.875rem; transition: all 0.2s; }
        .add-btn:hover { border-color: var(--primary); color: var(--primary); background: var(--primary-bg); }
        
        /* Tables */
        .data-table { width: 100%; border-collapse: collapse; font-size: 0.875rem; }
        .data-table th { background: var(--bg); padding: 0.75rem; text-align: left; font-weight: 600; border-bottom: 2px solid var(--border); }
        .data-table td { padding: 0.75rem; border-bottom: 1px solid var(--border); }
        .data-table input, .data-table select { width: 100%; padding: 0.5rem; border: 1px solid var(--border); border-radius: 6px; font-size: 0.8rem; }
        
        /* Review Section */
        .review-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1rem; margin-bottom: 1.5rem; }
        .review-card { background: var(--bg); border-radius: 8px; padding: 1rem; }
        .review-card-label { font-size: 0.75rem; color: var(--text-muted); margin-bottom: 0.25rem; text-transform: uppercase; }
        .review-card-value { font-weight: 600; }
        
        /* Toast */
        .toast { position: fixed; bottom: 2rem; right: 2rem; background: var(--sidebar-bg); color: white; padding: 1rem 1.5rem; border-radius: 8px; display: none; align-items: center; gap: 0.75rem; z-index: 1000; box-shadow: var(--shadow-lg); }
        .toast.show { display: flex; animation: slideIn 0.3s ease; }
        @keyframes slideIn { from { transform: translateY(20px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
        
        /* Help Modal */
        .modal-overlay { display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.5); z-index: 200; align-items: center; justify-content: center; padding: 2rem; }
        .modal-overlay.active { display: flex; }
        .modal { background: white; border-radius: 16px; max-width: 900px; width: 100%; max-height: 90vh; overflow: hidden; display: flex; flex-direction: column; }
        .modal-header { padding: 1.5rem; border-bottom: 1px solid var(--border); display: flex; justify-content: space-between; align-items: center; }
        .modal-title { font-size: 1.25rem; font-weight: 700; }
        .modal-close { width: 36px; height: 36px; border: none; background: var(--bg); border-radius: 8px; cursor: pointer; font-size: 1.25rem; }
        .modal-body { padding: 1.5rem; overflow-y: auto; flex: 1; }
        .modal-footer { padding: 1rem 1.5rem; border-top: 1px solid var(--border); display: flex; justify-content: flex-end; gap: 0.75rem; }
        
        /* Example Gallery Styles */
        .example-gallery { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 1.5rem; }
        .example-card { border: 2px solid var(--border); border-radius: 12px; overflow: hidden; transition: all 0.3s; cursor: pointer; }
        .example-card:hover { border-color: var(--primary); transform: translateY(-4px); box-shadow: var(--shadow-lg); }
        .example-card-header { background: linear-gradient(135deg, var(--primary) 0%, var(--primary-light) 100%); padding: 1.5rem; color: white; }
        .example-card-icon { font-size: 2rem; margin-bottom: 0.75rem; }
        .example-card-title { font-size: 1.125rem; font-weight: 700; margin-bottom: 0.25rem; }
        .example-card-subtitle { font-size: 0.875rem; opacity: 0.9; }
        .example-card-stats { display: flex; gap: 1rem; margin-top: 1rem; }
        .example-stat { text-align: center; }
        .example-stat-value { font-size: 1.25rem; font-weight: 700; }
        .example-stat-label { font-size: 0.7rem; opacity: 0.8; }
        .example-card-body { padding: 1.25rem; }
        .example-card-desc { font-size: 0.875rem; color: var(--text-muted); margin-bottom: 1rem; line-height: 1.5; }
        .example-tags { display: flex; flex-wrap: wrap; gap: 0.5rem; margin-bottom: 1rem; }
        .example-tag { padding: 0.25rem 0.75rem; background: var(--bg); border-radius: 20px; font-size: 0.75rem; color: var(--text-muted); }
        .example-card-actions { display: flex; gap: 0.75rem; }
        .example-card-actions .btn { flex: 1; justify-content: center; }
        
        /* Preview Modal Specific */
        .preview-section { margin-bottom: 1.5rem; }
        .preview-section-title { font-size: 1rem; font-weight: 700; color: var(--primary); margin-bottom: 0.75rem; padding-bottom: 0.5rem; border-bottom: 2px solid var(--primary-bg); }
        .preview-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 1rem; }
        .preview-item { background: var(--bg); padding: 0.75rem; border-radius: 8px; }
        .preview-item-label { font-size: 0.7rem; color: var(--text-muted); text-transform: uppercase; margin-bottom: 0.25rem; }
        .preview-item-value { font-weight: 500; font-size: 0.9rem; }
        .preview-list { list-style: none; }
        .preview-list li { padding: 0.5rem 0; border-bottom: 1px solid var(--border); font-size: 0.9rem; }
        .preview-list li:last-child { border-bottom: none; }
        .preview-table { width: 100%; border-collapse: collapse; font-size: 0.85rem; }
        .preview-table th { background: var(--primary-bg); color: var(--primary); padding: 0.75rem; text-align: left; }
        .preview-table td { padding: 0.75rem; border-bottom: 1px solid var(--border); }
        
        /* Print Styles */
        @media print {
            .sidebar, .content-header, .modal-overlay { display: none !important; }
            .main-content { margin-left: 0; }
            .section { display: block !important; page-break-inside: avoid; }
        }
    </style>
</head>
<body>
    <!-- Sidebar -->
    <aside class="sidebar">
        <div class="sidebar-header">
            <a href="/" class="sidebar-logo">
                <div class="sidebar-logo-icon">üìä</div>
                <span class="sidebar-logo-text">Feasibility Study</span>
            </a>
            <div class="sidebar-subtitle">Investment Justification Tool</div>
        </div>
        <a href="/dashboard" class="back-link">‚Üê Back to Dashboard</a>
        
        <div class="sidebar-progress">
            <div class="progress-label">Completion</div>
            <div class="progress-bar"><div class="progress-fill" id="progressFill" style="width: 0%"></div></div>
            <div class="progress-text"><span id="progressPercent">0</span>% Complete</div>
        </div>
        
        <nav class="sidebar-nav">
            <div class="nav-section">Project Information</div>
            <button class="nav-item active" data-section="1"><span class="nav-number">1</span> Project Details</button>
            <button class="nav-item" data-section="2"><span class="nav-number">2</span> Contact Information</button>
            <button class="nav-item" data-section="3"><span class="nav-number">3</span> Goals & Objectives</button>
            <button class="nav-item" data-section="4"><span class="nav-number">4</span> Project Description</button>
            
            <div class="nav-section">Background & Context</div>
            <button class="nav-item" data-section="5"><span class="nav-number">5</span> Strategic Fit</button>
            <button class="nav-item" data-section="6"><span class="nav-number">6</span> Alternatives</button>
            
            <div class="nav-section">Analysis</div>
            <button class="nav-item" data-section="7"><span class="nav-number">7</span> Analysis Criteria</button>
            <button class="nav-item" data-section="8"><span class="nav-number">8</span> Risks Analysis</button>
            <button class="nav-item" data-section="9"><span class="nav-number">9</span> Cost/Benefit</button>
            <button class="nav-item" data-section="10"><span class="nav-number">10</span> Investment Analysis</button>
            
            <div class="nav-section">Recommendation</div>
            <button class="nav-item" data-section="11"><span class="nav-number">11</span> Recommendation</button>
            <button class="nav-item" data-section="12"><span class="nav-number">12</span> Costs Breakdown</button>
            
            <div class="nav-section">Planning</div>
            <button class="nav-item" data-section="13"><span class="nav-number">13</span> Feasibility & Impact</button>
            <button class="nav-item" data-section="14"><span class="nav-number">14</span> Project Structure</button>
            <button class="nav-item" data-section="15"><span class="nav-number">15</span> Deliverables & Schedule</button>
            <button class="nav-item" data-section="16"><span class="nav-number">16</span> Assumptions</button>
            
            <div class="nav-section">Finalize</div>
            <button class="nav-item" data-section="17"><span class="nav-number">‚úì</span> Review & Export</button>
        </nav>
    </aside>
    
    <!-- Main Content -->
    <main class="main-content">
        <header class="content-header">
            <h2 class="header-title" id="sectionTitle">Project Details</h2>
            <div class="header-actions">
                <button class="btn btn-examples" onclick="openExamplesModal()">üìö Browse Examples</button>
                <button class="btn btn-secondary" onclick="openHelpModal()">‚ùì Help</button>
                <button class="btn btn-secondary" onclick="clearForm()">üóëÔ∏è Clear</button>
                <button class="btn btn-primary" onclick="exportPDF()">üìÑ Export PDF</button>
            </div>
        </header>
        
        <div class="content-body">
            <!-- Section 1: Project Details -->
            <div class="section active" id="section1">
                <div class="section-header">
                    <h3 class="section-title">Project Details</h3>
                    <p class="section-desc">Enter the basic information about your feasibility study.</p>
                </div>
                <div class="card">
                    <div class="form-group">
                        <label class="form-label">Project/Study Title</label>
                        <input type="text" class="form-input" id="projectTitle" placeholder="Enter the project or study title">
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">Prepared By</label>
                            <input type="text" class="form-input" id="preparedBy" placeholder="Your name">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Date</label>
                            <input type="date" class="form-input" id="preparedDate">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">Business Unit/Department</label>
                            <input type="text" class="form-input" id="businessUnit" placeholder="e.g., Information Technology">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Version</label>
                            <input type="text" class="form-input" id="version" placeholder="e.g., 1.0">
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Approval Status</label>
                        <select class="form-select" id="approvalStatus">
                            <option value="">Select status...</option>
                            <option value="draft">Draft</option>
                            <option value="review">Under Review</option>
                            <option value="approved">Approved</option>
                            <option value="rejected">Rejected</option>
                        </select>
                    </div>
                </div>
            </div>
            
            <!-- Section 2: Contact Information -->
            <div class="section" id="section2">
                <div class="section-header">
                    <h3 class="section-title">Contact Information</h3>
                    <p class="section-desc">Identify the key contacts for this project.</p>
                </div>
                <div class="card">
                    <h4 style="margin-bottom: 1rem; color: var(--primary);">Business Owner</h4>
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">Name</label>
                            <input type="text" class="form-input" id="ownerName" placeholder="Business owner name">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Title/Role</label>
                            <input type="text" class="form-input" id="ownerTitle" placeholder="e.g., VP of Operations">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">Email</label>
                            <input type="email" class="form-input" id="ownerEmail" placeholder="owner@company.com">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Phone</label>
                            <input type="tel" class="form-input" id="ownerPhone" placeholder="(555) 123-4567">
                        </div>
                    </div>
                </div>
                <div class="card">
                    <h4 style="margin-bottom: 1rem; color: var(--primary);">Project Coordinator</h4>
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">Name</label>
                            <input type="text" class="form-input" id="coordName" placeholder="Coordinator name">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Title/Role</label>
                            <input type="text" class="form-input" id="coordTitle" placeholder="e.g., Project Manager">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">Email</label>
                            <input type="email" class="form-input" id="coordEmail" placeholder="coordinator@company.com">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Phone</label>
                            <input type="tel" class="form-input" id="coordPhone" placeholder="(555) 123-4567">
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Section 3: Goals & Objectives -->
            <div class="section" id="section3">
                <div class="section-header">
                    <h3 class="section-title">Goals & Objectives</h3>
                    <p class="section-desc">Define what the project aims to achieve.</p>
                </div>
                <div class="card">
                    <div class="form-group">
                        <label class="form-label">Primary Goal</label>
                        <p class="form-hint">The main outcome this project is trying to achieve.</p>
                        <textarea class="form-textarea" id="primaryGoal" placeholder="Describe the primary goal of this project..."></textarea>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Specific Objectives</label>
                        <p class="form-hint">List measurable objectives that support the primary goal.</p>
                        <div id="objectivesList">
                            <div class="list-item">
                                <input type="text" class="form-input" placeholder="Enter an objective...">
                                <button class="remove-btn" onclick="removeListItem(this)">√ó</button>
                            </div>
                        </div>
                        <button class="add-btn" onclick="addObjective()">+ Add Objective</button>
                    </div>
                </div>
            </div>
            
            <!-- Section 4: Project Description -->
            <div class="section" id="section4">
                <div class="section-header">
                    <h3 class="section-title">Project Description</h3>
                    <p class="section-desc">Provide a detailed description of the proposed project.</p>
                </div>
                <div class="card">
                    <div class="form-group">
                        <label class="form-label">Project Summary</label>
                        <textarea class="form-textarea" id="projectSummary" placeholder="Provide a comprehensive summary of the proposed project..." style="min-height: 180px;"></textarea>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Priority Level</label>
                        <div class="priority-options">
                            <div class="priority-option" data-priority="high" onclick="selectPriority('high')">üî¥ High Priority</div>
                            <div class="priority-option" data-priority="moderate" onclick="selectPriority('moderate')">üü° Moderate Priority</div>
                            <div class="priority-option" data-priority="low" onclick="selectPriority('low')">üü¢ Low Priority</div>
                        </div>
                        <input type="hidden" id="priorityLevel" value="">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Priority Justification</label>
                        <textarea class="form-textarea" id="priorityJustification" placeholder="Explain why this priority level was assigned..."></textarea>
                    </div>
                </div>
            </div>
            
            <!-- Section 5: Strategic Fit -->
            <div class="section" id="section5">
                <div class="section-header">
                    <h3 class="section-title">Strategic Fit & Business Context</h3>
                    <p class="section-desc">Explain how this project aligns with organizational strategy.</p>
                </div>
                <div class="card">
                    <div class="form-group">
                        <label class="form-label">Strategic Alignment</label>
                        <p class="form-hint">How does this project support organizational goals and strategy?</p>
                        <textarea class="form-textarea" id="strategicAlignment" placeholder="Describe the strategic alignment..."></textarea>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Business Context</label>
                        <p class="form-hint">What business conditions or needs drive this project?</p>
                        <textarea class="form-textarea" id="businessContext" placeholder="Describe the business context..."></textarea>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Regulatory/Compliance Requirements</label>
                        <textarea class="form-textarea" id="complianceReqs" placeholder="List any regulatory or compliance requirements..."></textarea>
                    </div>
                </div>
            </div>
            
            <!-- Section 6: Alternatives -->
            <div class="section" id="section6">
                <div class="section-header">
                    <h3 class="section-title">Alternatives Considered</h3>
                    <p class="section-desc">Document the alternatives that were evaluated.</p>
                </div>
                <div class="card">
                    <div id="alternativesList">
                        <div class="alternative-item" style="background: var(--bg); padding: 1rem; border-radius: 8px; margin-bottom: 1rem;">
                            <div class="form-group">
                                <label class="form-label">Alternative Name</label>
                                <input type="text" class="form-input" placeholder="e.g., Option A - Build In-house">
                            </div>
                            <div class="form-group">
                                <label class="form-label">Description</label>
                                <textarea class="form-textarea" placeholder="Describe this alternative..." style="min-height: 80px;"></textarea>
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <label class="form-label">Estimated Cost</label>
                                    <input type="text" class="form-input" placeholder="$0">
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Pros/Cons Summary</label>
                                    <input type="text" class="form-input" placeholder="Key advantages and disadvantages">
                                </div>
                            </div>
                            <button class="remove-btn" onclick="removeAlternative(this)" style="margin-top: 0.5rem;">√ó Remove</button>
                        </div>
                    </div>
                    <button class="add-btn" onclick="addAlternative()">+ Add Alternative</button>
                </div>
            </div>
            
            <!-- Section 7: Analysis Criteria -->
            <div class="section" id="section7">
                <div class="section-header">
                    <h3 class="section-title">Analysis Criteria</h3>
                    <p class="section-desc">Define the criteria used to evaluate this project.</p>
                </div>
                <div class="card">
                    <div class="form-group">
                        <label class="form-label">Evaluation Criteria</label>
                        <p class="form-hint">List the criteria and their relative importance.</p>
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>Criterion</th>
                                    <th>Weight (%)</th>
                                    <th>Description</th>
                                    <th></th>
                                </tr>
                            </thead>
                            <tbody id="criteriaTable">
                                <tr>
                                    <td><input type="text" placeholder="e.g., Cost Effectiveness"></td>
                                    <td><input type="number" placeholder="25" min="0" max="100"></td>
                                    <td><input type="text" placeholder="Brief description"></td>
                                    <td><button class="remove-btn" onclick="removeTableRow(this)">√ó</button></td>
                                </tr>
                            </tbody>
                        </table>
                        <button class="add-btn" onclick="addCriteriaRow()" style="margin-top: 0.75rem;">+ Add Criterion</button>
                    </div>
                </div>
            </div>
            
            <!-- Section 8: Risks Analysis -->
            <div class="section" id="section8">
                <div class="section-header">
                    <h3 class="section-title">Risks Analysis</h3>
                    <p class="section-desc">Identify and assess potential risks.</p>
                </div>
                <div class="card">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Risk</th>
                                <th>Probability</th>
                                <th>Impact</th>
                                <th>Mitigation Strategy</th>
                                <th></th>
                            </tr>
                        </thead>
                        <tbody id="risksTable">
                            <tr>
                                <td><input type="text" placeholder="Describe risk"></td>
                                <td>
                                    <select>
                                        <option value="low">Low</option>
                                        <option value="medium">Medium</option>
                                        <option value="high">High</option>
                                    </select>
                                </td>
                                <td>
                                    <select>
                                        <option value="low">Low</option>
                                        <option value="medium">Medium</option>
                                        <option value="high">High</option>
                                    </select>
                                </td>
                                <td><input type="text" placeholder="Mitigation approach"></td>
                                <td><button class="remove-btn" onclick="removeTableRow(this)">√ó</button></td>
                            </tr>
                        </tbody>
                    </table>
                    <button class="add-btn" onclick="addRiskRow()" style="margin-top: 0.75rem;">+ Add Risk</button>
                </div>
            </div>
            
            <!-- Section 9: Cost/Benefit Analysis -->
            <div class="section" id="section9">
                <div class="section-header">
                    <h3 class="section-title">Cost/Benefit Analysis</h3>
                    <p class="section-desc">Document expected costs and benefits.</p>
                </div>
                <div class="card">
                    <h4 style="margin-bottom: 1rem; color: var(--primary);">Expected Benefits</h4>
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Benefit</th>
                                <th>Type</th>
                                <th>Estimated Value</th>
                                <th>Timeframe</th>
                                <th></th>
                            </tr>
                        </thead>
                        <tbody id="benefitsTable">
                            <tr>
                                <td><input type="text" placeholder="Describe benefit"></td>
                                <td>
                                    <select>
                                        <option value="tangible">Tangible</option>
                                        <option value="intangible">Intangible</option>
                                    </select>
                                </td>
                                <td><input type="text" placeholder="$0 or qualitative"></td>
                                <td><input type="text" placeholder="e.g., Year 1"></td>
                                <td><button class="remove-btn" onclick="removeTableRow(this)">√ó</button></td>
                            </tr>
                        </tbody>
                    </table>
                    <button class="add-btn" onclick="addBenefitRow()" style="margin-top: 0.75rem;">+ Add Benefit</button>
                </div>
                <div class="card">
                    <h4 style="margin-bottom: 1rem; color: var(--primary);">Expected Costs</h4>
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Cost Item</th>
                                <th>Category</th>
                                <th>Amount</th>
                                <th>Frequency</th>
                                <th></th>
                            </tr>
                        </thead>
                        <tbody id="costsTable">
                            <tr>
                                <td><input type="text" placeholder="Cost item name"></td>
                                <td>
                                    <select>
                                        <option value="one-time">One-time</option>
                                        <option value="recurring">Recurring</option>
                                    </select>
                                </td>
                                <td><input type="text" placeholder="$0"></td>
                                <td><input type="text" placeholder="e.g., Annual"></td>
                                <td><button class="remove-btn" onclick="removeTableRow(this)">√ó</button></td>
                            </tr>
                        </tbody>
                    </table>
                    <button class="add-btn" onclick="addCostRow()" style="margin-top: 0.75rem;">+ Add Cost Item</button>
                </div>
            </div>
            
            <!-- Section 10: Investment Analysis -->
            <div class="section" id="section10">
                <div class="section-header">
                    <h3 class="section-title">Investment Analysis</h3>
                    <p class="section-desc">Financial metrics for investment decision.</p>
                </div>
                <div class="card">
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">Net Present Value (NPV)</label>
                            <input type="text" class="form-input" id="npv" placeholder="$0">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Internal Rate of Return (IRR)</label>
                            <input type="text" class="form-input" id="irr" placeholder="0%">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">Return on Investment (ROI)</label>
                            <input type="text" class="form-input" id="roi" placeholder="0%">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Payback Period</label>
                            <input type="text" class="form-input" id="paybackPeriod" placeholder="e.g., 2.5 years">
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Financial Analysis Summary</label>
                        <textarea class="form-textarea" id="financialSummary" placeholder="Summarize the financial analysis and key findings..."></textarea>
                    </div>
                </div>
            </div>
            
            <!-- Section 11: Recommendation -->
            <div class="section" id="section11">
                <div class="section-header">
                    <h3 class="section-title">Recommendation</h3>
                    <p class="section-desc">Provide your formal recommendation.</p>
                </div>
                <div class="card">
                    <div class="form-group">
                        <label class="form-label">Recommendation</label>
                        <select class="form-select" id="recommendation">
                            <option value="">Select recommendation...</option>
                            <option value="proceed">‚úÖ Proceed with Project</option>
                            <option value="proceed-conditions">‚ö†Ô∏è Proceed with Conditions</option>
                            <option value="defer">‚è∏Ô∏è Defer Decision</option>
                            <option value="reject">‚ùå Do Not Proceed</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Recommendation Rationale</label>
                        <textarea class="form-textarea" id="recommendationRationale" placeholder="Explain the reasoning behind this recommendation..." style="min-height: 150px;"></textarea>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Conditions/Next Steps (if applicable)</label>
                        <textarea class="form-textarea" id="conditions" placeholder="List any conditions or immediate next steps..."></textarea>
                    </div>
                </div>
            </div>
            
            <!-- Section 12: Costs Breakdown -->
            <div class="section" id="section12">
                <div class="section-header">
                    <h3 class="section-title">Detailed Costs Breakdown</h3>
                    <p class="section-desc">Provide detailed cost categories.</p>
                </div>
                <div class="card">
                    <h4 style="margin-bottom: 1rem; color: var(--primary);">Direct Costs</h4>
                    <div class="form-group">
                        <textarea class="form-textarea" id="directCosts" placeholder="Labor, materials, equipment, software licenses, etc."></textarea>
                    </div>
                </div>
                <div class="card">
                    <h4 style="margin-bottom: 1rem; color: var(--primary);">Ongoing Costs</h4>
                    <div class="form-group">
                        <textarea class="form-textarea" id="ongoingCosts" placeholder="Maintenance, support, subscriptions, training, etc."></textarea>
                    </div>
                </div>
                <div class="card">
                    <h4 style="margin-bottom: 1rem; color: var(--primary);">Indirect Costs</h4>
                    <div class="form-group">
                        <textarea class="form-textarea" id="indirectCosts" placeholder="Overhead, administrative, opportunity costs, etc."></textarea>
                    </div>
                </div>
            </div>
            
            <!-- Section 13: Feasibility & Impact -->
            <div class="section" id="section13">
                <div class="section-header">
                    <h3 class="section-title">Feasibility & Impact Management</h3>
                    <p class="section-desc">Assess feasibility dimensions and organizational impact.</p>
                </div>
                <div class="card">
                    <div class="form-group">
                        <label class="form-label">Technical Feasibility</label>
                        <textarea class="form-textarea" id="technicalFeasibility" placeholder="Assess technical capabilities, infrastructure, and expertise..."></textarea>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Operational Feasibility</label>
                        <textarea class="form-textarea" id="operationalFeasibility" placeholder="Assess operational readiness and process changes..."></textarea>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Organizational Impact</label>
                        <textarea class="form-textarea" id="orgImpact" placeholder="Describe impact on organization, culture, and change management needs..."></textarea>
                    </div>
                </div>
            </div>
            
            <!-- Section 14: Project Structure -->
            <div class="section" id="section14">
                <div class="section-header">
                    <h3 class="section-title">Project Structure & Resources</h3>
                    <p class="section-desc">Define the project organization and resource needs.</p>
                </div>
                <div class="card">
                    <div class="form-group">
                        <label class="form-label">Project Governance</label>
                        <textarea class="form-textarea" id="governance" placeholder="Describe the governance structure, steering committee, decision-making process..."></textarea>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Resource Requirements</label>
                        <textarea class="form-textarea" id="resourceReqs" placeholder="List required personnel, skills, equipment, and facilities..."></textarea>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Key Stakeholders</label>
                        <textarea class="form-textarea" id="keyStakeholders" placeholder="Identify key stakeholders and their roles..."></textarea>
                    </div>
                </div>
            </div>
            
            <!-- Section 15: Deliverables & Schedule -->
            <div class="section" id="section15">
                <div class="section-header">
                    <h3 class="section-title">Deliverables & Schedule</h3>
                    <p class="section-desc">Define project deliverables and timeline.</p>
                </div>
                <div class="card">
                    <h4 style="margin-bottom: 1rem; color: var(--primary);">Key Deliverables</h4>
                    <div id="deliverablesList">
                        <div class="list-item">
                            <input type="text" class="form-input" placeholder="Enter a deliverable...">
                            <button class="remove-btn" onclick="removeListItem(this)">√ó</button>
                        </div>
                    </div>
                    <button class="add-btn" onclick="addDeliverable()">+ Add Deliverable</button>
                </div>
                <div class="card">
                    <h4 style="margin-bottom: 1rem; color: var(--primary);">Project Milestones</h4>
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Milestone</th>
                                <th>Target Date</th>
                                <th>Dependencies</th>
                                <th></th>
                            </tr>
                        </thead>
                        <tbody id="milestonesTable">
                            <tr>
                                <td><input type="text" placeholder="Milestone name"></td>
                                <td><input type="date"></td>
                                <td><input type="text" placeholder="Dependencies"></td>
                                <td><button class="remove-btn" onclick="removeTableRow(this)">√ó</button></td>
                            </tr>
                        </tbody>
                    </table>
                    <button class="add-btn" onclick="addMilestoneRow()" style="margin-top: 0.75rem;">+ Add Milestone</button>
                </div>
            </div>
            
            <!-- Section 16: Assumptions -->
            <div class="section" id="section16">
                <div class="section-header">
                    <h3 class="section-title">Assumptions</h3>
                    <p class="section-desc">Document key assumptions underlying this feasibility study.</p>
                </div>
                <div class="card">
                    <div class="form-group">
                        <label class="form-label">Key Assumptions</label>
                        <p class="form-hint">List assumptions that must hold true for this analysis to be valid.</p>
                        <div id="assumptionsList">
                            <div class="list-item">
                                <input type="text" class="form-input" placeholder="Enter an assumption...">
                                <button class="remove-btn" onclick="removeListItem(this)">√ó</button>
                            </div>
                        </div>
                        <button class="add-btn" onclick="addAssumption()">+ Add Assumption</button>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Dependencies</label>
                        <textarea class="form-textarea" id="dependencies" placeholder="List external dependencies and constraints..."></textarea>
                    </div>
                </div>
            </div>
            
            <!-- Section 17: Review & Export -->
            <div class="section" id="section17">
                <div class="section-header">
                    <h3 class="section-title">Review & Export</h3>
                    <p class="section-desc">Review your feasibility study and export to PDF.</p>
                </div>
                <div class="card">
                    <h4 style="margin-bottom: 1rem; color: var(--primary);">Summary</h4>
                    <div class="review-grid">
                        <div class="review-card">
                            <div class="review-card-label">Project Title</div>
                            <div class="review-card-value" id="reviewTitle">-</div>
                        </div>
                        <div class="review-card">
                            <div class="review-card-label">Prepared By</div>
                            <div class="review-card-value" id="reviewPreparedBy">-</div>
                        </div>
                        <div class="review-card">
                            <div class="review-card-label">Business Unit</div>
                            <div class="review-card-value" id="reviewBusinessUnit">-</div>
                        </div>
                        <div class="review-card">
                            <div class="review-card-label">Priority</div>
                            <div class="review-card-value" id="reviewPriority">-</div>
                        </div>
                        <div class="review-card">
                            <div class="review-card-label">Recommendation</div>
                            <div class="review-card-value" id="reviewRecommendation">-</div>
                        </div>
                        <div class="review-card">
                            <div class="review-card-label">ROI</div>
                            <div class="review-card-value" id="reviewROI">-</div>
                        </div>
                    </div>
                    <div style="display: flex; gap: 1rem; margin-top: 1.5rem;">
                        <button class="btn btn-primary" onclick="exportPDF()" style="flex: 1;">üìÑ Export to PDF</button>
                        <button class="btn btn-success" onclick="saveStudy()" style="flex: 1;">üíæ Save Study</button>
                    </div>
                </div>
            </div>
        </div>
    </main>
    
    <!-- Help Modal -->
    <div class="modal-overlay" id="helpModal">
        <div class="modal">
            <div class="modal-header">
                <h3 class="modal-title">üìñ Feasibility Study Guide</h3>
                <button class="modal-close" onclick="closeHelpModal()">√ó</button>
            </div>
            <div class="modal-body">
                <h4 style="margin-bottom: 0.5rem;">What is a Feasibility Study?</h4>
                <p style="margin-bottom: 1rem; color: var(--text-muted);">A feasibility study evaluates a proposed project or system to determine if it is technically feasible, financially viable, and operationally practical. It helps stakeholders make informed investment decisions.</p>
                
                <h4 style="margin-bottom: 0.5rem;">Key Sections</h4>
                <ul style="margin-left: 1.5rem; margin-bottom: 1rem; color: var(--text-muted);">
                    <li><strong>Project Information:</strong> Basic details and contacts</li>
                    <li><strong>Background & Context:</strong> Strategic alignment and alternatives</li>
                    <li><strong>Analysis:</strong> Criteria, risks, and cost/benefit evaluation</li>
                    <li><strong>Recommendation:</strong> Final recommendation with rationale</li>
                    <li><strong>Planning:</strong> Structure, schedule, and assumptions</li>
                </ul>
                
                <h4 style="margin-bottom: 0.5rem;">Tips for Success</h4>
                <ul style="margin-left: 1.5rem; color: var(--text-muted);">
                    <li>Be objective and data-driven in your analysis</li>
                    <li>Consider multiple alternatives before recommending</li>
                    <li>Identify and quantify risks early</li>
                    <li>Document all assumptions clearly</li>
                    <li>Get stakeholder input throughout the process</li>
                </ul>
            </div>
            <div class="modal-footer">
                <button class="btn btn-primary" onclick="closeHelpModal()">Got it!</button>
            </div>
        </div>
    </div>
    
    <!-- Examples Gallery Modal -->
    <div class="modal-overlay" id="examplesModal">
        <div class="modal" style="max-width: 1100px;">
            <div class="modal-header">
                <h3 class="modal-title">üìö Example Feasibility Studies</h3>
                <button class="modal-close" onclick="closeExamplesModal()">√ó</button>
            </div>
            <div class="modal-body">
                <p style="color: var(--text-muted); margin-bottom: 1.5rem;">Browse real-world examples to understand best practices. Preview any example or use it as your starting point.</p>
                <div class="example-gallery" id="exampleGallery">
                    <!-- Example cards will be rendered here -->
                </div>
            </div>
        </div>
    </div>
    
    <!-- Example Preview Modal -->
    <div class="modal-overlay" id="previewModal">
        <div class="modal" style="max-width: 900px;">
            <div class="modal-header">
                <h3 class="modal-title" id="previewTitle">Example Preview</h3>
                <button class="modal-close" onclick="closePreviewModal()">√ó</button>
            </div>
            <div class="modal-body" id="previewContent">
                <!-- Preview content rendered here -->
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closePreviewModal()">Close</button>
                <button class="btn btn-primary" id="useExampleBtn">Use This Example</button>
            </div>
        </div>
    </div>
    
    <!-- Toast -->
    <div class="toast" id="toast">
        <span id="toastIcon">‚úì</span>
        <span id="toastMessage">Saved!</span>
    </div>
    
    <script>
        // ============================================
        // EXAMPLE DATA - 3 Complete Examples
        // ============================================
        const exampleData = {
            erp: {
                id: 'erp',
                title: 'ERP System Modernization',
                subtitle: 'SAP S/4HANA Implementation',
                icon: 'üè¢',
                category: 'IT Infrastructure',
                stats: { roi: '145%', budget: '$2.8M', timeline: '18 months' },
                tags: ['Enterprise', 'Digital Transformation', 'SAP'],
                description: 'Comprehensive feasibility study for replacing legacy ERP systems with SAP S/4HANA, including cloud migration strategy and change management.',
                data: {
                    projectTitle: 'ERP System Modernization - SAP S/4HANA Implementation',
                    preparedBy: 'Sarah Chen',
                    preparedDate: '2026-01-15',
                    businessUnit: 'Information Technology',
                    version: '1.0',
                    approvalStatus: 'review',
                    ownerName: 'Michael Rodriguez',
                    ownerTitle: 'Chief Information Officer',
                    ownerEmail: 'mrodriguez@company.com',
                    ownerPhone: '(555) 234-5678',
                    coordName: 'Sarah Chen',
                    coordTitle: 'IT Project Manager',
                    coordEmail: 'schen@company.com',
                    coordPhone: '(555) 345-6789',
                    primaryGoal: 'Replace aging legacy ERP systems with a modern, integrated SAP S/4HANA platform to improve operational efficiency, enable real-time analytics, and support business growth over the next decade.',
                    objectives: [
                        'Consolidate 5 disparate systems into single integrated platform',
                        'Reduce month-end close cycle from 10 days to 3 days',
                        'Enable real-time financial reporting and analytics',
                        'Achieve 99.9% system uptime SLA',
                        'Complete migration within 18 months with minimal business disruption'
                    ],
                    projectSummary: 'This project proposes the implementation of SAP S/4HANA to replace our current legacy ERP landscape consisting of JD Edwards, custom Oracle databases, and multiple Excel-based processes. The new system will provide integrated financials, supply chain management, and human capital management capabilities. Implementation will follow a phased approach starting with Finance and Procurement modules, followed by Supply Chain and HR. Cloud deployment on SAP Rise is recommended to minimize infrastructure costs and accelerate time-to-value.',
                    priorityLevel: 'high',
                    priorityJustification: 'Current systems are reaching end-of-life with vendor support ending in 2027. Performance degradation is causing delays in financial reporting and inability to meet regulatory compliance timelines. Competitors have already modernized, creating competitive disadvantage.',
                    strategicAlignment: 'This initiative directly supports three key strategic objectives: (1) Digital Transformation roadmap requiring modern, cloud-native platforms, (2) Operational Excellence goal of reducing process cycle times by 50%, and (3) Data-Driven Decision Making requiring real-time analytics capabilities.',
                    businessContext: 'The company has grown 300% over the past 5 years through acquisitions, resulting in a fragmented IT landscape with multiple ERP systems that do not communicate effectively. Manual reconciliation between systems consumes over 2,000 person-hours monthly. Regulatory requirements for real-time reporting cannot be met with current infrastructure.',
                    complianceReqs: 'SOX compliance requirements for financial controls, GDPR for EU operations data handling, FDA 21 CFR Part 11 for manufacturing quality systems.',
                    alternatives: [
                        { name: 'Option A - SAP S/4HANA Cloud (Recommended)', description: 'Full implementation of SAP S/4HANA on RISE with SAP, including Finance, Supply Chain, and HR modules.', cost: '$2,800,000', proscons: 'Pros: Industry-leading functionality, strong roadmap. Cons: Higher initial cost, longer implementation.' },
                        { name: 'Option B - Oracle Fusion Cloud', description: 'Implementation of Oracle Fusion ERP Cloud for Finance and Supply Chain modules.', cost: '$2,400,000', proscons: 'Pros: Lower license cost, good SCM. Cons: Less mature than SAP, weaker manufacturing.' },
                        { name: 'Option C - Upgrade Existing JD Edwards', description: 'Upgrade current JD Edwards to latest version with custom integrations.', cost: '$1,200,000', proscons: 'Pros: Lower cost, familiar system. Cons: Does not address consolidation, limited analytics.' }
                    ],
                    criteria: [
                        { criterion: 'Functional Fit', weight: '30', description: 'How well does the solution meet business requirements' },
                        { criterion: 'Total Cost of Ownership', weight: '25', description: '5-year cost including implementation and operations' },
                        { criterion: 'Implementation Risk', weight: '20', description: 'Complexity and likelihood of successful implementation' },
                        { criterion: 'Vendor Viability', weight: '15', description: 'Vendor stability, roadmap, and support capabilities' },
                        { criterion: 'Time to Value', weight: '10', description: 'Speed of implementation and benefit realization' }
                    ],
                    risks: [
                        { risk: 'Data migration complexity from multiple legacy systems', probability: 'high', impact: 'high', mitigation: 'Engage specialized data migration partner, extensive data cleansing phase, parallel run period' },
                        { risk: 'User adoption resistance', probability: 'medium', impact: 'high', mitigation: 'Comprehensive change management program, executive sponsorship, super-user network' },
                        { risk: 'Budget overrun', probability: 'medium', impact: 'medium', mitigation: '15% contingency budget, fixed-price contracts where possible, weekly cost tracking' },
                        { risk: 'Business disruption during cutover', probability: 'low', impact: 'high', mitigation: 'Phased rollout approach, extensive UAT, rollback plan' }
                    ],
                    benefits: [
                        { benefit: 'Reduced operational costs through automation', type: 'tangible', value: '$800,000/year', timeframe: 'Year 2+' },
                        { benefit: 'Faster financial close reducing audit costs', type: 'tangible', value: '$200,000/year', timeframe: 'Year 1+' },
                        { benefit: 'Elimination of manual reconciliation', type: 'tangible', value: '$400,000/year', timeframe: 'Year 2+' },
                        { benefit: 'Improved decision making with real-time data', type: 'intangible', value: 'Strategic', timeframe: 'Year 1+' },
                        { benefit: 'Enhanced regulatory compliance', type: 'intangible', value: 'Risk Mitigation', timeframe: 'Immediate' }
                    ],
                    costs: [
                        { item: 'SAP Software Licenses', category: 'one-time', amount: '$800,000', frequency: 'One-time' },
                        { item: 'Implementation Partner', category: 'one-time', amount: '$1,400,000', frequency: 'One-time' },
                        { item: 'Data Migration', category: 'one-time', amount: '$300,000', frequency: 'One-time' },
                        { item: 'Training', category: 'one-time', amount: '$150,000', frequency: 'One-time' },
                        { item: 'Annual Maintenance', category: 'recurring', amount: '$240,000', frequency: 'Annual' }
                    ],
                    npv: '$4,200,000',
                    irr: '32%',
                    roi: '145%',
                    paybackPeriod: '2.1 years',
                    financialSummary: 'The financial analysis indicates strong returns with NPV of $4.2M over 5 years using 10% discount rate. Payback is achieved in 2.1 years. Sensitivity analysis shows project remains viable even with 20% cost overrun or 15% benefit shortfall.',
                    recommendation: 'proceed',
                    recommendationRationale: 'Based on comprehensive analysis, SAP S/4HANA Cloud implementation is recommended. The solution scored highest on functional fit (92%), offers best long-term TCO despite higher initial investment, and provides the most robust roadmap for future capabilities. Key deciding factors include: (1) superior real-time analytics capabilities, (2) best-in-class manufacturing and supply chain functionality critical for our operations, (3) strong partner ecosystem for ongoing support.',
                    conditions: '1. Secure executive steering committee with CIO as sponsor\n2. Complete data quality assessment before contract signing\n3. Establish change management office 3 months before go-live\n4. Include 15% contingency in approved budget',
                    directCosts: 'Software licenses: $800K, Implementation services: $1.4M, Hardware/infrastructure: $150K, Data migration tools and services: $300K',
                    ongoingCosts: 'Annual maintenance and support: $240K, Cloud hosting: $180K/year, Internal support team (3 FTE): $350K/year',
                    indirectCosts: 'Business user time for requirements and testing: ~2,000 hours, Temporary productivity loss during transition: estimated 5% for 3 months',
                    technicalFeasibility: 'Technical assessment confirms feasibility. Current infrastructure can support SAP RISE cloud connectivity. Network upgrades required at 2 remote sites ($50K). Integration with remaining legacy systems achievable through standard APIs. Internal IT team has basic SAP skills; will require training augmentation.',
                    operationalFeasibility: 'Operations team has indicated readiness for change. Similar ERP implementations at acquired companies provide relevant experience. Key concern is month-end close timing during cutover - recommend mid-month go-live.',
                    orgImpact: 'Significant change management required. Approximately 500 users affected. Role changes expected in Finance (consolidation of data entry roles) and Purchasing (shift to strategic sourcing). New analytics capabilities will require training across management. Change champion network of 25 super-users recommended.',
                    governance: 'Executive Steering Committee (monthly): CIO, CFO, COO, VP Supply Chain. Project Board (bi-weekly): Project Director, Workstream Leads, PMO. Change Advisory Board (weekly during implementation): IT Operations, Business Process Owners.',
                    resourceReqs: 'Implementation Partner: 8-12 consultants over 18 months. Internal: Project Manager (dedicated), Business Analysts (4), Technical Lead (1), Change Manager (1), Training Coordinator (1). Subject Matter Experts: 20% time commitment from Finance, Procurement, Supply Chain leads.',
                    keyStakeholders: 'Executive Sponsor: Michael Rodriguez (CIO)\nBusiness Owners: CFO, VP Supply Chain, VP HR\nTechnical Owner: Director of Enterprise Applications\nEnd User Representatives: Finance Manager, Procurement Manager, Plant Managers (3)',
                    deliverables: [
                        'Configured SAP S/4HANA system with Finance, Procurement, and SCM modules',
                        'Migrated master data and 3 years historical transactions',
                        'Integration interfaces with remaining legacy systems',
                        'End-user training materials and completion for 500 users',
                        'Operations runbook and support model documentation'
                    ],
                    milestones: [
                        { milestone: 'Project Kickoff & Planning', date: '2026-03-01', dependencies: 'Contract signed, team mobilized' },
                        { milestone: 'Requirements & Design Complete', date: '2026-06-01', dependencies: 'Business process workshops' },
                        { milestone: 'Build & Unit Testing Complete', date: '2026-10-01', dependencies: 'Design approval' },
                        { milestone: 'Integration Testing Complete', date: '2026-12-01', dependencies: 'Build complete, test data ready' },
                        { milestone: 'User Acceptance Testing Complete', date: '2027-02-01', dependencies: 'Integration testing signed off' },
                        { milestone: 'Go-Live', date: '2027-04-01', dependencies: 'UAT approval, training complete' }
                    ],
                    assumptions: [
                        'Executive sponsorship and funding remains committed throughout project',
                        'Key business SMEs available for 20% of their time during design and testing phases',
                        'No major organizational restructuring during implementation period',
                        'Legacy system support contracts extended through parallel run period',
                        'SAP RISE pricing remains stable per current proposal'
                    ],
                    dependencies: 'Network upgrade at remote sites must complete before UAT phase. HR system integration dependent on Workday API availability. Training environment requires 8 weeks lead time for provisioning.'
                }
            },
            
            manufacturing: {
                id: 'manufacturing',
                title: 'Manufacturing Automation',
                subtitle: 'Smart Factory Initiative',
                icon: 'üè≠',
                category: 'Operations',
                stats: { roi: '185%', budget: '$4.5M', timeline: '24 months' },
                tags: ['Industry 4.0', 'IoT', 'Automation'],
                description: 'Feasibility analysis for implementing smart manufacturing capabilities including IoT sensors, predictive maintenance, and automated quality control.',
                data: {
                    projectTitle: 'Smart Factory Initiative - Manufacturing Automation Phase 1',
                    preparedBy: 'James Wilson',
                    preparedDate: '2026-01-10',
                    businessUnit: 'Manufacturing Operations',
                    version: '2.1',
                    approvalStatus: 'approved',
                    ownerName: 'Patricia Martinez',
                    ownerTitle: 'VP of Manufacturing',
                    ownerEmail: 'pmartinez@company.com',
                    ownerPhone: '(555) 456-7890',
                    coordName: 'James Wilson',
                    coordTitle: 'Continuous Improvement Manager',
                    coordEmail: 'jwilson@company.com',
                    coordPhone: '(555) 567-8901',
                    primaryGoal: 'Transform our primary manufacturing facility into a smart factory leveraging IoT, automation, and AI to achieve world-class OEE (Overall Equipment Effectiveness) of 85% and reduce unplanned downtime by 70%.',
                    objectives: [
                        'Implement IoT sensor network across 50 critical production assets',
                        'Deploy predictive maintenance system reducing unplanned downtime by 70%',
                        'Automate quality inspection achieving 99.5% defect detection rate',
                        'Enable real-time production visibility dashboard for all stakeholders',
                        'Achieve ROI within 24 months of full deployment'
                    ],
                    projectSummary: 'This initiative proposes implementing Industry 4.0 capabilities at our main manufacturing facility. Phase 1 focuses on three key areas: (1) IoT sensor deployment on critical equipment to enable condition monitoring, (2) Predictive maintenance AI platform to anticipate failures before they occur, and (3) Computer vision-based automated quality inspection. The solution will integrate with our existing MES and ERP systems to provide end-to-end visibility.',
                    priorityLevel: 'high',
                    priorityJustification: 'Unplanned downtime currently costs $2.3M annually. Quality issues resulted in 3 customer complaints and $500K in returns last year. Competitors are already leveraging smart manufacturing, threatening our market position.',
                    strategicAlignment: 'Directly supports Manufacturing Excellence strategic pillar and Operational Efficiency goals. Enables future capacity expansion without proportional headcount increase. Supports sustainability goals through reduced waste and energy optimization.',
                    businessContext: 'Manufacturing facility operates 24/7 with 200 production assets, many approaching end of useful life. Current reactive maintenance approach results in 12% unplanned downtime. Manual quality inspection catches only 94% of defects. Growing customer demands for traceability and quality documentation.',
                    complianceReqs: 'ISO 9001 quality management requirements, FDA regulations for medical device components, Customer-specific traceability requirements (automotive OEMs).',
                    alternatives: [
                        { name: 'Option A - Full Smart Factory (Recommended)', description: 'Comprehensive IoT, predictive maintenance, and automated QC implementation.', cost: '$4,500,000', proscons: 'Pros: Maximum benefit, competitive advantage. Cons: Higher investment, complexity.' },
                        { name: 'Option B - Predictive Maintenance Only', description: 'Focus solely on predictive maintenance with limited IoT deployment.', cost: '$1,800,000', proscons: 'Pros: Lower cost, faster ROI. Cons: Misses quality and visibility benefits.' },
                        { name: 'Option C - Enhanced Traditional Approach', description: 'Increase preventive maintenance frequency and add manual inspection points.', cost: '$600,000', proscons: 'Pros: Low cost, no technology risk. Cons: Limited improvement potential, higher labor costs.' }
                    ],
                    criteria: [
                        { criterion: 'Downtime Reduction Potential', weight: '35', description: 'Expected reduction in unplanned downtime' },
                        { criterion: 'Quality Improvement', weight: '25', description: 'Defect detection and prevention capability' },
                        { criterion: 'Implementation Feasibility', weight: '20', description: 'Technical complexity and resource availability' },
                        { criterion: 'Total Cost of Ownership', weight: '20', description: '5-year total cost including implementation and operations' }
                    ],
                    risks: [
                        { risk: 'Integration with legacy equipment', probability: 'high', impact: 'medium', mitigation: 'Retrofit sensor packages available; pilot on 5 machines first' },
                        { risk: 'Workforce resistance to automation', probability: 'medium', impact: 'high', mitigation: 'Emphasize augmentation over replacement; reskilling program' },
                        { risk: 'Cybersecurity vulnerabilities', probability: 'medium', impact: 'high', mitigation: 'Segmented OT network, security assessment, monitoring tools' },
                        { risk: 'AI model accuracy in production', probability: 'medium', impact: 'medium', mitigation: '6-month learning period before full autonomy; human oversight' }
                    ],
                    benefits: [
                        { benefit: 'Reduced unplanned downtime', type: 'tangible', value: '$1,600,000/year', timeframe: 'Year 2+' },
                        { benefit: 'Quality cost reduction', type: 'tangible', value: '$400,000/year', timeframe: 'Year 1+' },
                        { benefit: 'Labor efficiency gains', type: 'tangible', value: '$300,000/year', timeframe: 'Year 2+' },
                        { benefit: 'Energy optimization', type: 'tangible', value: '$150,000/year', timeframe: 'Year 2+' },
                        { benefit: 'Customer satisfaction improvement', type: 'intangible', value: 'Retention', timeframe: 'Year 1+' }
                    ],
                    costs: [
                        { item: 'IoT sensors and hardware', category: 'one-time', amount: '$800,000', frequency: 'One-time' },
                        { item: 'Software platform licenses', category: 'one-time', amount: '$600,000', frequency: 'One-time' },
                        { item: 'Implementation services', category: 'one-time', amount: '$1,200,000', frequency: 'One-time' },
                        { item: 'Computer vision system', category: 'one-time', amount: '$500,000', frequency: 'One-time' },
                        { item: 'Infrastructure and networking', category: 'one-time', amount: '$400,000', frequency: 'One-time' },
                        { item: 'Annual platform subscription', category: 'recurring', amount: '$180,000', frequency: 'Annual' }
                    ],
                    npv: '$6,800,000',
                    irr: '42%',
                    roi: '185%',
                    paybackPeriod: '1.8 years',
                    financialSummary: 'Strong financial returns expected with NPV of $6.8M over 5 years. Quick payback of 1.8 years driven by significant downtime cost reduction. Conservative estimates used; similar implementations have achieved 20-30% better results.',
                    recommendation: 'proceed',
                    recommendationRationale: 'The full Smart Factory implementation (Option A) is recommended based on: (1) Highest NPV and strategic value despite higher initial investment, (2) Competitive necessity - 60% of competitors have similar capabilities, (3) Platform approach enables future expansion and additional use cases, (4) Customer requirements increasingly mandate traceability and quality documentation capabilities.',
                    conditions: '1. Complete cybersecurity assessment and implement recommendations before IoT deployment\n2. Establish workforce reskilling program in partnership with HR\n3. Pilot on Production Line 3 before full rollout\n4. Secure dedicated OT network infrastructure',
                    directCosts: 'IoT hardware and sensors: $800K, Computer vision cameras and processors: $500K, Software licenses: $600K, Implementation partner: $1.2M, Network infrastructure: $400K',
                    ongoingCosts: 'Platform subscription: $180K/year, Dedicated support engineer: $120K/year, Hardware maintenance: $80K/year, Model retraining and updates: $50K/year',
                    indirectCosts: 'Production team time for installation windows: ~500 hours, Temporary efficiency loss during learning curve: 2% for 3 months',
                    technicalFeasibility: 'Technical assessment confirms feasibility. 80% of equipment can accept retrofit sensors. Remaining 20% requires custom mounting solutions (included in budget). Network infrastructure needs upgrade to support IoT traffic. Cloud platform selected has proven manufacturing deployments.',
                    operationalFeasibility: 'Operations team is enthusiastic about reducing firefighting. Maintenance technicians have expressed interest in predictive capabilities. Will require 3 months of parallel operation before full reliance on AI recommendations.',
                    orgImpact: 'Job role evolution rather than elimination expected. Maintenance technicians become "reliability engineers" with data analysis skills. Quality inspectors transition to exception handling and continuous improvement. Training investment of $150K included. Union consultation required.',
                    governance: 'Executive Sponsor: VP Manufacturing. Steering Committee: VP Mfg, VP Engineering, Director IT, Director HR (monthly). Project Team: Project Manager, OT Engineer, Data Scientist, Change Lead (daily standups). Vendor Partner: Dedicated project team of 4.',
                    resourceReqs: 'Implementation Partner: 4 specialists over 24 months. Internal: Project Manager, OT/Automation Engineer, Data Analyst. Production: Line supervisors from each shift for requirements and testing. IT: Network engineer (25%), Security specialist (10%).',
                    keyStakeholders: 'Executive Sponsor: Patricia Martinez (VP Manufacturing)\nTechnical Owner: Director of Engineering\nIT Partner: CIO\nWorkforce Representative: Plant Manager, Union Steward\nCustomer Liaison: VP Sales (for traceability requirements)',
                    deliverables: [
                        'IoT sensor network covering 50 critical assets with real-time monitoring',
                        'Predictive maintenance AI platform with 30-day failure prediction',
                        'Automated visual quality inspection on 3 production lines',
                        'Real-time production dashboard accessible on plant floor and mobile',
                        'Integration with MES and ERP for closed-loop operations'
                    ],
                    milestones: [
                        { milestone: 'Infrastructure & Network Preparation', date: '2026-04-01', dependencies: 'Cybersecurity assessment complete' },
                        { milestone: 'Pilot Line IoT Deployment', date: '2026-07-01', dependencies: 'Hardware procurement, network ready' },
                        { milestone: 'Predictive Maintenance AI Go-Live (Pilot)', date: '2026-10-01', dependencies: '3 months sensor data collected' },
                        { milestone: 'Quality Vision System Deployment', date: '2027-01-01', dependencies: 'Camera installation, model training' },
                        { milestone: 'Full Factory Rollout Complete', date: '2027-06-01', dependencies: 'Pilot success validation' },
                        { milestone: 'Optimization & Handover', date: '2027-09-01', dependencies: 'Full deployment stable' }
                    ],
                    assumptions: [
                        'Production schedule allows 4-hour installation windows per machine',
                        'Existing MES system APIs are accessible and documented',
                        'Workforce reskilling is achievable within project timeline',
                        'No major equipment purchases planned that would change scope',
                        'Cloud platform maintains 99.9% availability SLA'
                    ],
                    dependencies: 'Cybersecurity infrastructure must be in place before IoT deployment. MES upgrade (separate project) should complete before integration phase. HR must establish reskilling program before go-live.'
                }
            },
            
            expansion: {
                id: 'expansion',
                title: 'Market Expansion Study',
                subtitle: 'APAC Regional Entry',
                icon: 'üåè',
                category: 'Business Development',
                stats: { roi: '125%', budget: '$3.2M', timeline: '24 months' },
                tags: ['International', 'Growth', 'Strategy'],
                description: 'Strategic feasibility study for expanding operations into Asia-Pacific markets, covering market analysis, regulatory requirements, and operational setup.',
                data: {
                    projectTitle: 'APAC Market Expansion - Singapore Hub Establishment',
                    preparedBy: 'Amanda Lee',
                    preparedDate: '2026-01-12',
                    businessUnit: 'Corporate Strategy',
                    version: '1.2',
                    approvalStatus: 'review',
                    ownerName: 'Richard Thompson',
                    ownerTitle: 'Chief Strategy Officer',
                    ownerEmail: 'rthompson@company.com',
                    ownerPhone: '(555) 678-9012',
                    coordName: 'Amanda Lee',
                    coordTitle: 'Director of Business Development',
                    coordEmail: 'alee@company.com',
                    coordPhone: '(555) 789-0123',
                    primaryGoal: 'Establish a regional headquarters in Singapore to serve the Asia-Pacific market, targeting $25M in regional revenue within 3 years of launch.',
                    objectives: [
                        'Establish legal entity and operational presence in Singapore by Q3 2026',
                        'Build regional sales team of 15 FTEs within first year',
                        'Secure 5 marquee customer accounts in Year 1',
                        'Achieve $8M revenue in Year 1, $15M Year 2, $25M Year 3',
                        'Establish partner network covering 8 APAC countries'
                    ],
                    projectSummary: 'This feasibility study evaluates the establishment of an Asia-Pacific regional headquarters in Singapore. The initiative includes legal entity setup, office establishment, team hiring, localization of products and services, and go-to-market execution. Singapore is recommended as the hub location due to business-friendly environment, talent availability, and strategic geographic position. Initial focus markets are Singapore, Australia, Japan, and South Korea, with expansion to Southeast Asia in Year 2.',
                    priorityLevel: 'high',
                    priorityJustification: 'APAC represents the fastest-growing market for our industry at 12% CAGR. Three major customers have requested local presence as condition for expansion. Competitors have established APAC presence and are winning deals we cannot compete for.',
                    strategicAlignment: 'Directly supports Global Expansion strategic initiative and Revenue Diversification goal. Reduces customer concentration risk (currently 85% North America). Enables 24/7 support model for global customers.',
                    businessContext: 'Current APAC business is $3M annually, managed remotely from US headquarters with significant time zone challenges. Customer satisfaction in region is 15 points below global average. Market research indicates $500M addressable market in target segments.',
                    complianceReqs: 'Singapore business registration and employment regulations, Data protection requirements (PDPA), Export control compliance, Local employment laws for each target country.',
                    alternatives: [
                        { name: 'Option A - Singapore Hub (Recommended)', description: 'Full regional HQ in Singapore with local teams for sales, support, and operations.', cost: '$3,200,000', proscons: 'Pros: Maximum market access, strong local presence. Cons: Highest investment and commitment.' },
                        { name: 'Option B - Australia Hub', description: 'Regional HQ in Sydney, leveraging English-speaking market first.', cost: '$2,800,000', proscons: 'Pros: Easier market entry, similar culture. Cons: Less central location, higher costs.' },
                        { name: 'Option C - Partnership Model', description: 'Expand through distribution partners without direct presence.', cost: '$800,000', proscons: 'Pros: Low investment, fast entry. Cons: Limited control, lower margins, brand risk.' }
                    ],
                    criteria: [
                        { criterion: 'Market Access', weight: '30', description: 'Ability to serve target markets effectively' },
                        { criterion: 'Cost Efficiency', weight: '25', description: 'Total cost to establish and operate' },
                        { criterion: 'Talent Availability', weight: '20', description: 'Access to qualified professionals' },
                        { criterion: 'Business Environment', weight: '15', description: 'Regulatory ease, infrastructure, stability' },
                        { criterion: 'Speed to Market', weight: '10', description: 'Time required to become operational' }
                    ],
                    risks: [
                        { risk: 'Slower than expected market adoption', probability: 'medium', impact: 'high', mitigation: 'Conservative revenue targets, strong partner program, customer success focus' },
                        { risk: 'Key hire attrition', probability: 'medium', impact: 'high', mitigation: 'Competitive compensation, equity participation, strong culture' },
                        { risk: 'Currency fluctuation', probability: 'high', impact: 'medium', mitigation: 'Price in local currency, hedging strategy, regional P&L' },
                        { risk: 'Regulatory changes', probability: 'low', impact: 'medium', mitigation: 'Local legal counsel, compliance monitoring, flexible structure' }
                    ],
                    benefits: [
                        { benefit: 'New revenue from APAC market', type: 'tangible', value: '$25M by Year 3', timeframe: 'Year 1-3' },
                        { benefit: 'Improved existing APAC customer retention', type: 'tangible', value: '$1.5M/year', timeframe: 'Year 1+' },
                        { benefit: 'Follow-the-sun support capability', type: 'tangible', value: '$200K/year', timeframe: 'Year 1+' },
                        { benefit: 'Enhanced global brand presence', type: 'intangible', value: 'Strategic', timeframe: 'Immediate' },
                        { benefit: 'Geographic revenue diversification', type: 'intangible', value: 'Risk Mitigation', timeframe: 'Year 2+' }
                    ],
                    costs: [
                        { item: 'Legal entity setup and compliance', category: 'one-time', amount: '$150,000', frequency: 'One-time' },
                        { item: 'Office setup and equipment', category: 'one-time', amount: '$300,000', frequency: 'One-time' },
                        { item: 'Initial hiring and relocation', category: 'one-time', amount: '$400,000', frequency: 'One-time' },
                        { item: 'Product localization', category: 'one-time', amount: '$250,000', frequency: 'One-time' },
                        { item: 'Marketing launch campaign', category: 'one-time', amount: '$500,000', frequency: 'One-time' },
                        { item: 'Annual payroll (Year 1: 15 FTEs)', category: 'recurring', amount: '$1,800,000', frequency: 'Annual' }
                    ],
                    npv: '$8,500,000',
                    irr: '38%',
                    roi: '125%',
                    paybackPeriod: '2.4 years',
                    financialSummary: 'The expansion shows strong financial returns with NPV of $8.5M over 5 years. Break-even expected in Year 2, positive contribution from Year 3. Model assumes conservative 20% market penetration of addressable market. Sensitivity analysis shows viability even with 30% revenue shortfall.',
                    recommendation: 'proceed',
                    recommendationRationale: 'Singapore hub establishment is recommended based on: (1) Clear market demand evidenced by customer requests and competitive pressure, (2) Strong financial returns with manageable investment, (3) Singapore offers optimal combination of market access, talent, and business environment, (4) Establishes foundation for long-term APAC growth. Delaying further risks losing market position to competitors.',
                    conditions: '1. Appoint Regional Managing Director before proceeding (critical hire)\n2. Secure commitment from 2 anchor customers for Year 1\n3. Complete detailed product localization requirements assessment\n4. Establish local banking and treasury relationships',
                    directCosts: 'Entity setup: $150K, Office: $300K, Hiring/relocation: $400K, Localization: $250K, Marketing: $500K, Year 1 payroll: $1.8M',
                    ongoingCosts: 'Payroll growth to $3M by Year 3, Office lease: $200K/year, Marketing: $300K/year ongoing, Travel: $150K/year',
                    indirectCosts: 'HQ management time for coordination: ~1,000 hours/year, Potential short-term distraction from core markets',
                    technicalFeasibility: 'Technical infrastructure requirements are straightforward. Cloud-based systems require no local infrastructure. Product localization (language, currency, date formats) estimated at 3 months effort. Integration with local payment systems required for some markets.',
                    operationalFeasibility: 'Operational model proven in EMEA expansion. Singapore offers established professional services ecosystem. Time zone coverage (14-17 hours from US) enables follow-the-sun operations. Initial team can leverage HQ support during ramp-up.',
                    orgImpact: 'Requires new regional leadership role reporting to CEO. Sales and Marketing teams need coordination processes with new region. Support organization expands to 24/7 model. Finance needs regional P&L reporting capability. HR must establish international employment framework.',
                    governance: 'Executive Sponsor: CEO. Regional Managing Director (to be hired): full P&L accountability. Corporate functions provide dotted-line support: Finance, HR, Legal, Marketing. Quarterly business reviews with executive team.',
                    resourceReqs: 'Regional Managing Director: critical hire, target Q2 2026. Sales team: 8 FTEs by end of Year 1. Pre-sales/Solutions: 3 FTEs. Customer Success: 2 FTEs. Operations/Admin: 2 FTEs. HQ support: Legal, Finance, HR (fractional)',
                    keyStakeholders: 'Executive Sponsor: CEO\nRegional Leader: Managing Director APAC (to be hired)\nCorporate Partners: CFO, CHRO, General Counsel, CMO\nCustomer Advisory: Key APAC prospects and existing customers',
                    deliverables: [
                        'Singapore legal entity registered and operational',
                        'Regional office established with full infrastructure',
                        'Regional team of 15 hired and onboarded',
                        'Localized product and marketing materials for 4 markets',
                        'Partner agreements signed in 8 countries',
                        'Go-to-market launch executed'
                    ],
                    milestones: [
                        { milestone: 'Regional MD Hired', date: '2026-04-01', dependencies: 'Search initiated, compensation approved' },
                        { milestone: 'Legal Entity Established', date: '2026-06-01', dependencies: 'Legal counsel engaged' },
                        { milestone: 'Office Operational', date: '2026-08-01', dependencies: 'Lease signed, build-out complete' },
                        { milestone: 'Initial Team Hired (8 FTEs)', date: '2026-09-01', dependencies: 'MD in place, HR support' },
                        { milestone: 'Product Localization Complete', date: '2026-10-01', dependencies: 'Requirements defined' },
                        { milestone: 'Market Launch', date: '2026-11-01', dependencies: 'Team, product, marketing ready' },
                        { milestone: 'First Year Revenue Target', date: '2027-12-31', dependencies: 'Full team, pipeline developed' }
                    ],
                    assumptions: [
                        'Singapore government incentives for tech companies remain available',
                        'Able to hire Regional MD with required experience and network',
                        'Product/market fit validated by current APAC customers applies broadly',
                        'No major trade policy changes affecting market access',
                        'Currency exchange rates remain within 10% of current levels'
                    ],
                    dependencies: 'Board approval for investment required. Regional MD must be hired before office setup. ERP and CRM must support multi-currency and multi-entity (IT project in progress). Legal entity in place before hiring local employees.'
                }
            }
        };
        
        // ============================================
        // STATE & INITIALIZATION
        // ============================================
        let currentSection = 1;
        let currentPreviewExample = null;
        const totalSections = 17;
        
        document.addEventListener('DOMContentLoaded', function() {
            loadFromLocalStorage();
            updateProgress();
            renderExampleGallery();
            
            // Navigation clicks
            document.querySelectorAll('.nav-item').forEach(item => {
                item.addEventListener('click', function() {
                    const section = parseInt(this.dataset.section);
                    goToSection(section);
                });
            });
            
            // Auto-save on input
            document.querySelectorAll('input, textarea, select').forEach(el => {
                el.addEventListener('change', saveToLocalStorage);
                el.addEventListener('blur', saveToLocalStorage);
            });
            
            // Set default date
            if (!document.getElementById('preparedDate').value) {
                document.getElementById('preparedDate').value = new Date().toISOString().split('T')[0];
            }
        });
        
        // ============================================
        // EXAMPLE GALLERY FUNCTIONS
        // ============================================
        function renderExampleGallery() {
            const gallery = document.getElementById('exampleGallery');
            gallery.innerHTML = '';
            
            Object.values(exampleData).forEach(example => {
                const card = document.createElement('div');
                card.className = 'example-card';
                card.innerHTML = `
                    <div class="example-card-header">
                        <div class="example-card-icon">${example.icon}</div>
                        <div class="example-card-title">${example.title}</div>
                        <div class="example-card-subtitle">${example.subtitle}</div>
                        <div class="example-card-stats">
                            <div class="example-stat">
                                <div class="example-stat-value">${example.stats.roi}</div>
                                <div class="example-stat-label">ROI</div>
                            </div>
                            <div class="example-stat">
                                <div class="example-stat-value">${example.stats.budget}</div>
                                <div class="example-stat-label">Budget</div>
                            </div>
                            <div class="example-stat">
                                <div class="example-stat-value">${example.stats.timeline}</div>
                                <div class="example-stat-label">Timeline</div>
                            </div>
                        </div>
                    </div>
                    <div class="example-card-body">
                        <p class="example-card-desc">${example.description}</p>
                        <div class="example-tags">
                            ${example.tags.map(tag => `<span class="example-tag">${tag}</span>`).join('')}
                        </div>
                        <div class="example-card-actions">
                            <button class="btn btn-secondary" onclick="previewExample('${example.id}')">üëÅÔ∏è Preview</button>
                            <button class="btn btn-primary" onclick="useExample('${example.id}')">‚ú® Use This</button>
                        </div>
                    </div>
                `;
                gallery.appendChild(card);
            });
        }
        
        function openExamplesModal() {
            document.getElementById('examplesModal').classList.add('active');
        }
        
        function closeExamplesModal() {
            document.getElementById('examplesModal').classList.remove('active');
        }
        
        function previewExample(exampleId) {
            const example = exampleData[exampleId];
            if (!example) return;
            
            currentPreviewExample = exampleId;
            document.getElementById('previewTitle').textContent = example.title + ' - Preview';
            
            const content = document.getElementById('previewContent');
            const data = example.data;
            
            content.innerHTML = `
                <div class="preview-section">
                    <h4 class="preview-section-title">üìã Project Overview</h4>
                    <div class="preview-grid">
                        <div class="preview-item">
                            <div class="preview-item-label">Project Title</div>
                            <div class="preview-item-value">${data.projectTitle}</div>
                        </div>
                        <div class="preview-item">
                            <div class="preview-item-label">Business Unit</div>
                            <div class="preview-item-value">${data.businessUnit}</div>
                        </div>
                        <div class="preview-item">
                            <div class="preview-item-label">Prepared By</div>
                            <div class="preview-item-value">${data.preparedBy}</div>
                        </div>
                        <div class="preview-item">
                            <div class="preview-item-label">Priority</div>
                            <div class="preview-item-value" style="text-transform: capitalize;">${data.priorityLevel}</div>
                        </div>
                    </div>
                    <p style="margin-top: 1rem; color: var(--text-muted);">${data.projectSummary}</p>
                </div>
                
                <div class="preview-section">
                    <h4 class="preview-section-title">üéØ Goals & Objectives</h4>
                    <p style="margin-bottom: 0.75rem;"><strong>Primary Goal:</strong> ${data.primaryGoal}</p>
                    <ul class="preview-list">
                        ${data.objectives.map(obj => `<li>‚úì ${obj}</li>`).join('')}
                    </ul>
                </div>
                
                <div class="preview-section">
                    <h4 class="preview-section-title">üí∞ Financial Analysis</h4>
                    <div class="preview-grid">
                        <div class="preview-item">
                            <div class="preview-item-label">NPV</div>
                            <div class="preview-item-value">${data.npv}</div>
                        </div>
                        <div class="preview-item">
                            <div class="preview-item-label">ROI</div>
                            <div class="preview-item-value">${data.roi}</div>
                        </div>
                        <div class="preview-item">
                            <div class="preview-item-label">IRR</div>
                            <div class="preview-item-value">${data.irr}</div>
                        </div>
                        <div class="preview-item">
                            <div class="preview-item-label">Payback Period</div>
                            <div class="preview-item-value">${data.paybackPeriod}</div>
                        </div>
                    </div>
                </div>
                
                <div class="preview-section">
                    <h4 class="preview-section-title">‚ö†Ô∏è Key Risks</h4>
                    <table class="preview-table">
                        <thead>
                            <tr>
                                <th>Risk</th>
                                <th>Probability</th>
                                <th>Impact</th>
                            </tr>
                        </thead>
                        <tbody>
                            ${data.risks.slice(0, 4).map(r => `
                                <tr>
                                    <td>${r.risk}</td>
                                    <td style="text-transform: capitalize;">${r.probability}</td>
                                    <td style="text-transform: capitalize;">${r.impact}</td>
                                </tr>
                            `).join('')}
                        </tbody>
                    </table>
                </div>
                
                <div class="preview-section">
                    <h4 class="preview-section-title">‚úÖ Recommendation</h4>
                    <div style="background: var(--success-bg); padding: 1rem; border-radius: 8px; margin-bottom: 1rem;">
                        <strong style="color: var(--success);">
                            ${data.recommendation === 'proceed' ? '‚úÖ Proceed with Project' : 
                              data.recommendation === 'proceed-conditions' ? '‚ö†Ô∏è Proceed with Conditions' :
                              data.recommendation === 'defer' ? '‚è∏Ô∏è Defer Decision' : '‚ùå Do Not Proceed'}
                        </strong>
                    </div>
                    <p style="color: var(--text-muted);">${data.recommendationRationale.substring(0, 300)}...</p>
                </div>
            `;
            
            document.getElementById('useExampleBtn').onclick = () => useExample(exampleId);
            document.getElementById('examplesModal').classList.remove('active');
            document.getElementById('previewModal').classList.add('active');
        }
        
        function closePreviewModal() {
            document.getElementById('previewModal').classList.remove('active');
            currentPreviewExample = null;
        }
        
        function useExample(exampleId) {
            const example = exampleData[exampleId];
            if (!example) return;
            
            const data = example.data;
            
            // Fill all form fields
            document.getElementById('projectTitle').value = data.projectTitle || '';
            document.getElementById('preparedBy').value = data.preparedBy || '';
            document.getElementById('preparedDate').value = data.preparedDate || '';
            document.getElementById('businessUnit').value = data.businessUnit || '';
            document.getElementById('version').value = data.version || '';
            document.getElementById('approvalStatus').value = data.approvalStatus || '';
            
            document.getElementById('ownerName').value = data.ownerName || '';
            document.getElementById('ownerTitle').value = data.ownerTitle || '';
            document.getElementById('ownerEmail').value = data.ownerEmail || '';
            document.getElementById('ownerPhone').value = data.ownerPhone || '';
            document.getElementById('coordName').value = data.coordName || '';
            document.getElementById('coordTitle').value = data.coordTitle || '';
            document.getElementById('coordEmail').value = data.coordEmail || '';
            document.getElementById('coordPhone').value = data.coordPhone || '';
            
            document.getElementById('primaryGoal').value = data.primaryGoal || '';
            
            // Objectives list
            const objectivesList = document.getElementById('objectivesList');
            objectivesList.innerHTML = '';
            (data.objectives || []).forEach(obj => {
                const div = document.createElement('div');
                div.className = 'list-item';
                div.innerHTML = `
                    <input type="text" class="form-input" value="${obj}">
                    <button class="remove-btn" onclick="removeListItem(this)">√ó</button>
                `;
                objectivesList.appendChild(div);
            });
            
            document.getElementById('projectSummary').value = data.projectSummary || '';
            selectPriority(data.priorityLevel || '');
            document.getElementById('priorityJustification').value = data.priorityJustification || '';
            
            document.getElementById('strategicAlignment').value = data.strategicAlignment || '';
            document.getElementById('businessContext').value = data.businessContext || '';
            document.getElementById('complianceReqs').value = data.complianceReqs || '';
            
            // Alternatives
            const altList = document.getElementById('alternativesList');
            altList.innerHTML = '';
            (data.alternatives || []).forEach(alt => {
                addAlternativeWithData(alt);
            });
            
            // Criteria table
            const criteriaTable = document.getElementById('criteriaTable');
            criteriaTable.innerHTML = '';
            (data.criteria || []).forEach(c => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td><input type="text" value="${c.criterion}"></td>
                    <td><input type="number" value="${c.weight}" min="0" max="100"></td>
                    <td><input type="text" value="${c.description}"></td>
                    <td><button class="remove-btn" onclick="removeTableRow(this)">√ó</button></td>
                `;
                criteriaTable.appendChild(row);
            });
            
            // Risks table
            const risksTable = document.getElementById('risksTable');
            risksTable.innerHTML = '';
            (data.risks || []).forEach(r => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td><input type="text" value="${r.risk}"></td>
                    <td><select><option value="low" ${r.probability === 'low' ? 'selected' : ''}>Low</option><option value="medium" ${r.probability === 'medium' ? 'selected' : ''}>Medium</option><option value="high" ${r.probability === 'high' ? 'selected' : ''}>High</option></select></td>
                    <td><select><option value="low" ${r.impact === 'low' ? 'selected' : ''}>Low</option><option value="medium" ${r.impact === 'medium' ? 'selected' : ''}>Medium</option><option value="high" ${r.impact === 'high' ? 'selected' : ''}>High</option></select></td>
                    <td><input type="text" value="${r.mitigation}"></td>
                    <td><button class="remove-btn" onclick="removeTableRow(this)">√ó</button></td>
                `;
                risksTable.appendChild(row);
            });
            
            // Benefits table
            const benefitsTable = document.getElementById('benefitsTable');
            benefitsTable.innerHTML = '';
            (data.benefits || []).forEach(b => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td><input type="text" value="${b.benefit}"></td>
                    <td><select><option value="tangible" ${b.type === 'tangible' ? 'selected' : ''}>Tangible</option><option value="intangible" ${b.type === 'intangible' ? 'selected' : ''}>Intangible</option></select></td>
                    <td><input type="text" value="${b.value}"></td>
                    <td><input type="text" value="${b.timeframe}"></td>
                    <td><button class="remove-btn" onclick="removeTableRow(this)">√ó</button></td>
                `;
                benefitsTable.appendChild(row);
            });
            
            // Costs table
            const costsTable = document.getElementById('costsTable');
            costsTable.innerHTML = '';
            (data.costs || []).forEach(c => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td><input type="text" value="${c.item}"></td>
                    <td><select><option value="one-time" ${c.category === 'one-time' ? 'selected' : ''}>One-time</option><option value="recurring" ${c.category === 'recurring' ? 'selected' : ''}>Recurring</option></select></td>
                    <td><input type="text" value="${c.amount}"></td>
                    <td><input type="text" value="${c.frequency}"></td>
                    <td><button class="remove-btn" onclick="removeTableRow(this)">√ó</button></td>
                `;
                costsTable.appendChild(row);
            });
            
            document.getElementById('npv').value = data.npv || '';
            document.getElementById('irr').value = data.irr || '';
            document.getElementById('roi').value = data.roi || '';
            document.getElementById('paybackPeriod').value = data.paybackPeriod || '';
            document.getElementById('financialSummary').value = data.financialSummary || '';
            
            document.getElementById('recommendation').value = data.recommendation || '';
            document.getElementById('recommendationRationale').value = data.recommendationRationale || '';
            document.getElementById('conditions').value = data.conditions || '';
            
            document.getElementById('directCosts').value = data.directCosts || '';
            document.getElementById('ongoingCosts').value = data.ongoingCosts || '';
            document.getElementById('indirectCosts').value = data.indirectCosts || '';
            
            document.getElementById('technicalFeasibility').value = data.technicalFeasibility || '';
            document.getElementById('operationalFeasibility').value = data.operationalFeasibility || '';
            document.getElementById('orgImpact').value = data.orgImpact || '';
            
            document.getElementById('governance').value = data.governance || '';
            document.getElementById('resourceReqs').value = data.resourceReqs || '';
            document.getElementById('keyStakeholders').value = data.keyStakeholders || '';
            
            // Deliverables list
            const deliverablesList = document.getElementById('deliverablesList');
            deliverablesList.innerHTML = '';
            (data.deliverables || []).forEach(d => {
                const div = document.createElement('div');
                div.className = 'list-item';
                div.innerHTML = `
                    <input type="text" class="form-input" value="${d}">
                    <button class="remove-btn" onclick="removeListItem(this)">√ó</button>
                `;
                deliverablesList.appendChild(div);
            });
            
            // Milestones table
            const milestonesTable = document.getElementById('milestonesTable');
            milestonesTable.innerHTML = '';
            (data.milestones || []).forEach(m => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td><input type="text" value="${m.milestone}"></td>
                    <td><input type="date" value="${m.date}"></td>
                    <td><input type="text" value="${m.dependencies}"></td>
                    <td><button class="remove-btn" onclick="removeTableRow(this)">√ó</button></td>
                `;
                milestonesTable.appendChild(row);
            });
            
            // Assumptions list
            const assumptionsList = document.getElementById('assumptionsList');
            assumptionsList.innerHTML = '';
            (data.assumptions || []).forEach(a => {
                const div = document.createElement('div');
                div.className = 'list-item';
                div.innerHTML = `
                    <input type="text" class="form-input" value="${a}">
                    <button class="remove-btn" onclick="removeListItem(this)">√ó</button>
                `;
                assumptionsList.appendChild(div);
            });
            
            document.getElementById('dependencies').value = data.dependencies || '';
            
            // Close modals and save
            closeExamplesModal();
            closePreviewModal();
            saveToLocalStorage();
            updateProgress();
            showToast('Example loaded successfully!');
            goToSection(1);
        }
        
        function addAlternativeWithData(alt) {
            const container = document.getElementById('alternativesList');
            const div = document.createElement('div');
            div.className = 'alternative-item';
            div.style.cssText = 'background: var(--bg); padding: 1rem; border-radius: 8px; margin-bottom: 1rem;';
            div.innerHTML = `
                <div class="form-group">
                    <label class="form-label">Alternative Name</label>
                    <input type="text" class="form-input" value="${alt.name}" placeholder="e.g., Option A">
                </div>
                <div class="form-group">
                    <label class="form-label">Description</label>
                    <textarea class="form-textarea" style="min-height: 80px;">${alt.description}</textarea>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label">Estimated Cost</label>
                        <input type="text" class="form-input" value="${alt.cost}" placeholder="$0">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Pros/Cons Summary</label>
                        <input type="text" class="form-input" value="${alt.proscons}">
                    </div>
                </div>
                <button class="remove-btn" onclick="removeAlternative(this)" style="margin-top: 0.5rem;">√ó Remove</button>
            `;
            container.appendChild(div);
        }
        
        // ============================================
        // NAVIGATION
        // ============================================
        function goToSection(section) {
            // Hide all sections
            document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
            document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
            
            // Show selected section
            document.getElementById('section' + section).classList.add('active');
            document.querySelector(`[data-section="${section}"]`).classList.add('active');
            
            currentSection = section;
            
            // Update header title
            const titles = {
                1: 'Project Details', 2: 'Contact Information', 3: 'Goals & Objectives',
                4: 'Project Description', 5: 'Strategic Fit', 6: 'Alternatives',
                7: 'Analysis Criteria', 8: 'Risks Analysis', 9: 'Cost/Benefit Analysis',
                10: 'Investment Analysis', 11: 'Recommendation', 12: 'Costs Breakdown',
                13: 'Feasibility & Impact', 14: 'Project Structure', 15: 'Deliverables & Schedule',
                16: 'Assumptions', 17: 'Review & Export'
            };
            document.getElementById('sectionTitle').textContent = titles[section];
            
            // Update review section if on last page
            if (section === 17) updateReview();
        }
        
        // ============================================
        // FORM HELPERS
        // ============================================
        function selectPriority(priority) {
            document.querySelectorAll('.priority-option').forEach(opt => {
                opt.classList.remove('selected', 'priority-high', 'priority-moderate', 'priority-low');
                if (opt.dataset.priority === priority) {
                    opt.classList.add('selected', 'priority-' + priority);
                }
            });
            document.getElementById('priorityLevel').value = priority;
        }
        
        function removeListItem(btn) {
            btn.parentElement.remove();
        }
        
        function removeTableRow(btn) {
            btn.closest('tr').remove();
        }
        
        function removeAlternative(btn) {
            btn.closest('.alternative-item').remove();
        }
        
        function addObjective() {
            const list = document.getElementById('objectivesList');
            const div = document.createElement('div');
            div.className = 'list-item';
            div.innerHTML = `
                <input type="text" class="form-input" placeholder="Enter an objective...">
                <button class="remove-btn" onclick="removeListItem(this)">√ó</button>
            `;
            list.appendChild(div);
        }
        
        function addDeliverable() {
            const list = document.getElementById('deliverablesList');
            const div = document.createElement('div');
            div.className = 'list-item';
            div.innerHTML = `
                <input type="text" class="form-input" placeholder="Enter a deliverable...">
                <button class="remove-btn" onclick="removeListItem(this)">√ó</button>
            `;
            list.appendChild(div);
        }
        
        function addAssumption() {
            const list = document.getElementById('assumptionsList');
            const div = document.createElement('div');
            div.className = 'list-item';
            div.innerHTML = `
                <input type="text" class="form-input" placeholder="Enter an assumption...">
                <button class="remove-btn" onclick="removeListItem(this)">√ó</button>
            `;
            list.appendChild(div);
        }
        
        function addAlternative() {
            const container = document.getElementById('alternativesList');
            const div = document.createElement('div');
            div.className = 'alternative-item';
            div.style.cssText = 'background: var(--bg); padding: 1rem; border-radius: 8px; margin-bottom: 1rem;';
            div.innerHTML = `
                <div class="form-group">
                    <label class="form-label">Alternative Name</label>
                    <input type="text" class="form-input" placeholder="e.g., Option A - Build In-house">
                </div>
                <div class="form-group">
                    <label class="form-label">Description</label>
                    <textarea class="form-textarea" placeholder="Describe this alternative..." style="min-height: 80px;"></textarea>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label">Estimated Cost</label>
                        <input type="text" class="form-input" placeholder="$0">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Pros/Cons Summary</label>
                        <input type="text" class="form-input" placeholder="Key advantages and disadvantages">
                    </div>
                </div>
                <button class="remove-btn" onclick="removeAlternative(this)" style="margin-top: 0.5rem;">√ó Remove</button>
            `;
            container.appendChild(div);
        }
        
        function addCriteriaRow() {
            const tbody = document.getElementById('criteriaTable');
            const row = document.createElement('tr');
            row.innerHTML = `
                <td><input type="text" placeholder="e.g., Cost Effectiveness"></td>
                <td><input type="number" placeholder="25" min="0" max="100"></td>
                <td><input type="text" placeholder="Brief description"></td>
                <td><button class="remove-btn" onclick="removeTableRow(this)">√ó</button></td>
            `;
            tbody.appendChild(row);
        }
        
        function addRiskRow() {
            const tbody = document.getElementById('risksTable');
            const row = document.createElement('tr');
            row.innerHTML = `
                <td><input type="text" placeholder="Describe risk"></td>
                <td><select><option value="low">Low</option><option value="medium">Medium</option><option value="high">High</option></select></td>
                <td><select><option value="low">Low</option><option value="medium">Medium</option><option value="high">High</option></select></td>
                <td><input type="text" placeholder="Mitigation approach"></td>
                <td><button class="remove-btn" onclick="removeTableRow(this)">√ó</button></td>
            `;
            tbody.appendChild(row);
        }
        
        function addBenefitRow() {
            const tbody = document.getElementById('benefitsTable');
            const row = document.createElement('tr');
            row.innerHTML = `
                <td><input type="text" placeholder="Describe benefit"></td>
                <td><select><option value="tangible">Tangible</option><option value="intangible">Intangible</option></select></td>
                <td><input type="text" placeholder="$0 or qualitative"></td>
                <td><input type="text" placeholder="e.g., Year 1"></td>
                <td><button class="remove-btn" onclick="removeTableRow(this)">√ó</button></td>
            `;
            tbody.appendChild(row);
        }
        
        function addCostRow() {
            const tbody = document.getElementById('costsTable');
            const row = document.createElement('tr');
            row.innerHTML = `
                <td><input type="text" placeholder="Cost item name"></td>
                <td><select><option value="one-time">One-time</option><option value="recurring">Recurring</option></select></td>
                <td><input type="text" placeholder="$0"></td>
                <td><input type="text" placeholder="e.g., Annual"></td>
                <td><button class="remove-btn" onclick="removeTableRow(this)">√ó</button></td>
            `;
            tbody.appendChild(row);
        }
        
        function addMilestoneRow() {
            const tbody = document.getElementById('milestonesTable');
            const row = document.createElement('tr');
            row.innerHTML = `
                <td><input type="text" placeholder="Milestone name"></td>
                <td><input type="date"></td>
                <td><input type="text" placeholder="Dependencies"></td>
                <td><button class="remove-btn" onclick="removeTableRow(this)">√ó</button></td>
            `;
            tbody.appendChild(row);
        }
        
        // ============================================
        // PROGRESS & REVIEW
        // ============================================
        function updateProgress() {
            const fields = document.querySelectorAll('.form-input, .form-textarea, .form-select');
            let filled = 0;
            fields.forEach(f => {
                if (f.value && f.value.trim()) filled++;
            });
            const percent = Math.round((filled / fields.length) * 100);
            document.getElementById('progressFill').style.width = percent + '%';
            document.getElementById('progressPercent').textContent = percent;
        }
        
        function updateReview() {
            document.getElementById('reviewTitle').textContent = document.getElementById('projectTitle').value || '-';
            document.getElementById('reviewPreparedBy').textContent = document.getElementById('preparedBy').value || '-';
            document.getElementById('reviewBusinessUnit').textContent = document.getElementById('businessUnit').value || '-';
            document.getElementById('reviewPriority').textContent = document.getElementById('priorityLevel').value || '-';
            
            const rec = document.getElementById('recommendation').value;
            const recLabels = {
                'proceed': '‚úÖ Proceed',
                'proceed-conditions': '‚ö†Ô∏è Proceed with Conditions',
                'defer': '‚è∏Ô∏è Defer',
                'reject': '‚ùå Do Not Proceed'
            };
            document.getElementById('reviewRecommendation').textContent = recLabels[rec] || '-';
            document.getElementById('reviewROI').textContent = document.getElementById('roi').value || '-';
        }
        
        // ============================================
        // STORAGE
        // ============================================
        function saveToLocalStorage() {
            const data = {
                projectTitle: document.getElementById('projectTitle').value,
                preparedBy: document.getElementById('preparedBy').value,
                preparedDate: document.getElementById('preparedDate').value,
                businessUnit: document.getElementById('businessUnit').value,
                version: document.getElementById('version').value,
                approvalStatus: document.getElementById('approvalStatus').value,
                ownerName: document.getElementById('ownerName').value,
                ownerTitle: document.getElementById('ownerTitle').value,
                ownerEmail: document.getElementById('ownerEmail').value,
                ownerPhone: document.getElementById('ownerPhone').value,
                coordName: document.getElementById('coordName').value,
                coordTitle: document.getElementById('coordTitle').value,
                coordEmail: document.getElementById('coordEmail').value,
                coordPhone: document.getElementById('coordPhone').value,
                primaryGoal: document.getElementById('primaryGoal').value,
                projectSummary: document.getElementById('projectSummary').value,
                priorityLevel: document.getElementById('priorityLevel').value,
                priorityJustification: document.getElementById('priorityJustification').value,
                strategicAlignment: document.getElementById('strategicAlignment').value,
                businessContext: document.getElementById('businessContext').value,
                complianceReqs: document.getElementById('complianceReqs').value,
                npv: document.getElementById('npv').value,
                irr: document.getElementById('irr').value,
                roi: document.getElementById('roi').value,
                paybackPeriod: document.getElementById('paybackPeriod').value,
                financialSummary: document.getElementById('financialSummary').value,
                recommendation: document.getElementById('recommendation').value,
                recommendationRationale: document.getElementById('recommendationRationale').value,
                conditions: document.getElementById('conditions').value,
                directCosts: document.getElementById('directCosts').value,
                ongoingCosts: document.getElementById('ongoingCosts').value,
                indirectCosts: document.getElementById('indirectCosts').value,
                technicalFeasibility: document.getElementById('technicalFeasibility').value,
                operationalFeasibility: document.getElementById('operationalFeasibility').value,
                orgImpact: document.getElementById('orgImpact').value,
                governance: document.getElementById('governance').value,
                resourceReqs: document.getElementById('resourceReqs').value,
                keyStakeholders: document.getElementById('keyStakeholders').value,
                dependencies: document.getElementById('dependencies').value
            };
            
            localStorage.setItem('feasibilityStudy', JSON.stringify(data));
            updateProgress();
        }
        
        function loadFromLocalStorage() {
            const saved = localStorage.getItem('feasibilityStudy');
            if (!saved) return;
            
            try {
                const data = JSON.parse(saved);
                Object.keys(data).forEach(key => {
                    const el = document.getElementById(key);
                    if (el) el.value = data[key] || '';
                });
                if (data.priorityLevel) selectPriority(data.priorityLevel);
            } catch (e) {
                console.error('Error loading saved data:', e);
            }
        }
        
        function clearForm() {
            if (!confirm('Are you sure you want to clear all data? This cannot be undone.')) return;
            localStorage.removeItem('feasibilityStudy');
            location.reload();
        }
        
        function saveStudy() {
            saveToLocalStorage();
            showToast('Study saved successfully!');
        }
        
        // ============================================
        // MODALS & TOAST
        // ============================================
        function openHelpModal() {
            document.getElementById('helpModal').classList.add('active');
        }
        
        function closeHelpModal() {
            document.getElementById('helpModal').classList.remove('active');
        }
        
        function showToast(message) {
            const toast = document.getElementById('toast');
            document.getElementById('toastMessage').textContent = message;
            toast.classList.add('show');
            setTimeout(() => toast.classList.remove('show'), 3000);
        }
        
        function exportPDF() {
            showToast('Preparing PDF...');
            setTimeout(() => window.print(), 500);
        }
        
        // Close modals on overlay click
        document.querySelectorAll('.modal-overlay').forEach(overlay => {
            overlay.addEventListener('click', function(e) {
                if (e.target === this) {
                    this.classList.remove('active');
                }
            });
        });
        
        // Close modals on Escape
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                document.querySelectorAll('.modal-overlay').forEach(m => m.classList.remove('active'));
            }
        });
    </script>
<script src="/js/access-control.js"></script>
</body>
</html>
